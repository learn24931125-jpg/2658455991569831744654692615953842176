<H1>æ™ºæ…§æ—…éŠå°è¦½</H1>
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI æ™ºæ…§æ—…éŠå°è¦½ç³»çµ± - å°ç£ (å¢å¼·ç‰ˆ)</title>
    <style>
        /* Neumorphism æŸ”å’Œäºå…‹åŠ›é¢¨æ ¼è®Šæ•¸ */
        :root {
            --main-bg-color: #e0e5ec;
            --light-shadow: #ffffff;
            --dark-shadow: #a3b1c6;
            --text-color: #333;
            --accent-color: #4CAF50;  /* ç¶ è‰² */
            --warning-color: #f44336; /* ç´…è‰² */
            --info-color: #2196F3;    /* è—è‰² */
            --border-radius: 12px;
            --padding-size: 20px;
        }

        /* æ¨£å¼ç°¡åŒ–ï¼Œä¿ç•™æ ¸å¿ƒ Neumorphism æ•ˆæœ */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--main-bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
        }
        .container { max-width: 1400px; margin: 0 auto; padding: var(--padding-size); width: 100%; }
        .neumorphic-inset { /* å…§å‡¹ */
            border-radius: var(--border-radius); background: var(--main-bg-color);
            box-shadow: inset 6px 6px 12px var(--dark-shadow), inset -6px -6px 12px var(--light-shadow);
            padding: var(--padding-size); margin-bottom: var(--padding-size);
        }
        .neumorphic-outset { /* å¤–å‡¸ */
            border-radius: var(--border-radius); background: var(--main-bg-color);
            box-shadow: 6px 6px 12px var(--dark-shadow), -6px -6px 12px var(--light-shadow);
            padding: var(--padding-size); margin-bottom: var(--padding-size);
        }
        header { text-align: center; padding: 40px 0; box-shadow: 0 4px 8px var(--dark-shadow), 0 -4px 8px var(--light-shadow); margin-bottom: var(--padding-size); }
        .main-content { display: flex; gap: var(--padding-size); }
        .sidebar { width: 30%; min-width: 300px; display: flex; flex-direction: column; gap: var(--padding-size); }
        .main-panel { width: 70%; display: flex; flex-direction: column; gap: var(--padding-size); }
        
        /* æŒ‰éˆ•åŸºç¤æ¨£å¼ */
        .nav-button {
            border: none; padding: 10px 15px; border-radius: var(--border-radius); background: var(--main-bg-color);
            cursor: pointer; font-weight: bold; color: var(--text-color);
            box-shadow: 3px 3px 6px var(--dark-shadow), -3px -3px 6px var(--light-shadow);
            transition: all 0.2s ease;
        }
        .nav-button:hover { transform: scale(1.02); }
        .nav-button.active, .nav-button:active {
            box-shadow: inset 3px 3px 6px var(--dark-shadow), inset -3px -3px 6px var(--light-shadow);
            color: var(--accent-color);
        }
        
        /* å¡ç‰‡ç¶²æ ¼èˆ‡æ¨£å¼ */
        .card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--padding-size); }
        .spot-card {
            border-radius: var(--border-radius); background: var(--main-bg-color);
            box-shadow: 6px 6px 12px var(--dark-shadow), -6px -6px 12px var(--light-shadow);
            cursor: pointer; transition: all 0.3s ease; overflow: hidden; position: relative;
        }
        .spot-card:hover { transform: translateY(-3px); box-shadow: 8px 8px 16px var(--dark-shadow), -8px -8px 16px var(--light-shadow); }
        .card-content { padding: 15px; }
        .card-actions { display: flex; justify-content: space-between; margin-top: 10px; }
        .action-btn {
            padding: 8px 12px; font-size: 0.9em; border: none; border-radius: 8px; background: var(--main-bg-color);
            box-shadow: 2px 2px 4px var(--dark-shadow), -2px -2px 4px var(--light-shadow);
            cursor: pointer; transition: all 0.2s ease;
        }
        .action-btn.origin { color: white; background-color: var(--accent-color); }
        .action-btn.destination { color: white; background-color: var(--warning-color); }
        .action-btn:active { box-shadow: inset 2px 2px 4px var(--dark-shadow), inset -2px -2px 4px var(--light-shadow); }
        
        /* åœ–ç‰‡ä½”ä½ç¬¦ */
        .card-image-placeholder {
            width: 100%; height: 180px; background-color: #d1d9e6;
            box-shadow: inset 1px 1px 3px var(--dark-shadow), inset -1px -1px 3px var(--light-shadow);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            font-size: 0.9em; color: #666; padding: 10px; box-sizing: border-box;
            background-size: cover; background-position: center; text-shadow: 1px 1px 2px white;
        }
        
        /* åˆ†é¡æŒ‰éˆ•åˆ—è¡¨ */
        .menu-list {
            display: flex; flex-wrap: wrap; gap: 10px; padding: 0; list-style: none;
            justify-content: flex-start; /* é å·¦æ’åˆ— */
        }
        .menu-list li { margin-bottom: 5px; }
        
        /* åœ°åœ–é¡¯ç¤º */
        #map-display {
            width: 100%; height: 400px; background-color: #a3b1c6;
            box-shadow: inset 8px 8px 16px var(--dark-shadow), inset -8px -8px 16px var(--light-shadow);
            border-radius: var(--border-radius); display: flex; justify-content: center; align-items: center;
            color: var(--light-shadow); font-size: 1.2em; margin-top: 20px;
        }
    </style>
</head>
<body>

    <header>
        <h1>ğŸ‡¹ğŸ‡¼ AI æ™ºæ…§æ—…éŠå°è¦½ç³»çµ±</h1>
        <p>è¦åŠƒå°ç£æœ€ä½³è·¯ç·šï¼Œç”Ÿæˆæ™¯é»ä»‹ç´¹èˆ‡åœ–ç‰‡</p>
    </header>

    <div class="container">
        <div class="api-settings neumorphic-inset">
            <label>API ç‹€æ…‹: <span id="api-status-text">æœªé©—è­‰</span> <span id="api-status-light" class="status-light invalid"></span></label>
            <label for="apiKey">Gemini API Key:</label>
            <input type="text" id="apiKey" placeholder="è¼¸å…¥æ‚¨çš„ Gemini API Key" />
            <select id="modelSelect" class="nav-button">
                <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
                <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
            </select>
            <button class="nav-button" onclick="checkApiKey()">é©—è­‰ Key</button>
        </div>

        <div class="main-content">
            <div class="sidebar">
                <div class="trip-status neumorphic-outset">
                    <h3>ğŸ“ æ‚¨çš„æ—…ç¨‹ç‹€æ…‹</h3>
                    <p>å•Ÿç¨‹åœ°: <span id="origin-display" style="color:var(--accent-color)"><strong>æœªè¨­å®š</strong></span></p>
                    <p>ç›®çš„åœ°: <span id="destination-display" style="color:var(--warning-color)"><strong>æœªè¨­å®š</strong></span></p>
                    <button class="nav-button" id="start-planning-btn" style="width: 100%; background-color: var(--info-color); color: white; margin-top: 15px;">AI è‡ªå‹•è¦åŠƒè·¯ç·š</button>
                </div>
                
                <div class="spot-menu neumorphic-outset">
                    <h3>ğŸ—ºï¸ æ™¯é»è³‡è¨Šèˆ‡åœ°åœ–</h3>
                    
                    <div id="spot-info-display">
                        è«‹é»æ“Šæ™¯é»å¡ç‰‡æŸ¥çœ‹è©³ç´°è³‡è¨Šã€‚
                    </div>

                    <div id="map-display">
                        åœ°åœ–å±•ç¤ºå€ï¼ˆå°‡æ¨¡æ“¬åº§æ¨™é¡¯ç¤ºï¼‰
                    </div>
                </div>
            </div>

            <div class="main-panel">
                <h2>ç²¾é¸å°ç£æ™¯é»</h2>
                
                <div class="neumorphic-inset" style="padding: 10px;">
                    <ul class="menu-list" id="category-menu">
                        <li><button class="nav-button category-btn active" data-category="å…¨éƒ¨">å…¨éƒ¨æ™¯é»</button></li>
                        <li><button class="nav-button category-btn" data-category="å¤è¹Ÿ">æ­·å²å¤è¹Ÿ</button></li>
                        <li><button class="nav-button category-btn" data-category="è‡ªç„¶">è‡ªç„¶é¢¨å…‰</button></li>
                        <li><button class="nav-button category-btn" data-category="ç¾é£Ÿ">å¤œå¸‚ç¾é£Ÿ</button></li>
                        <li><button class="nav-button category-btn" data-category="æ–‡å‰µ">æ–‡å‰µåœ’å€</button></li>
                        <li><button class="nav-button category-btn" data-category="å…¶ä»–">å…¶ä»–</button></li>
                    </ul>
                </div>
                
                <div class="card-grid" id="spot-cards-container">
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ“´å……çš„æ¨¡æ“¬æ™¯é»è³‡æ–™ (åŒ…å« IDã€åç¨±ã€æè¿°å’Œåœ°åœ–åº§æ¨™)
        const SPOTS_DATA = [
            // æ­·å²å¤è¹Ÿ (å¤è¹Ÿ)
            { id: 1, name: "æ•…å®®åšç‰©é™¢", description: "ğŸ›ï¸ å…¨çƒä¸­è¯æ–‡åŒ–è—è¡“å¯¶è—ã€‚", location: "å°åŒ—å£«æ—", category: "å¤è¹Ÿ", coords: { lat: 25.1018, lng: 121.5489 }, image: null },
            { id: 2, name: "å®‰å¹³å¤å ¡", description: "ğŸ° å°ç£æ­·å²æœ€æ‚ ä¹…çš„åŸå ¡ä¹‹ä¸€ï¼ŒåŸåç†±è˜­é®åŸã€‚", location: "å°å—å®‰å¹³", category: "å¤è¹Ÿ", coords: { lat: 23.0011, lng: 120.1650 }, image: null },
            { id: 3, name: "ç´…æ¯›åŸ", description: "ğŸ‡¬ğŸ‡§ æ­·å²æ‚ ä¹…çš„è¥¿ç­ç‰™ã€è·è˜­ã€è‹±åœ‹éºè·¡ã€‚", location: "æ–°åŒ—æ·¡æ°´", category: "å¤è¹Ÿ", coords: { lat: 25.1754, lng: 121.4329 }, image: null },
            
            // è‡ªç„¶é¢¨å…‰ (è‡ªç„¶)
            { id: 4, name: "æ—¥æœˆæ½­", description: "ğŸï¸ å°ç£ä¸­éƒ¨æœ€ç¾çš„é«˜å±±æ¹–æ³Šï¼Œæ™¯è‰²å®œäººã€‚", location: "å—æŠ•é­šæ± ", category: "è‡ªç„¶", coords: { lat: 23.8581, lng: 120.9185 }, image: null },
            { id: 5, name: "å¤ªé­¯é–£åœ‹å®¶å…¬åœ’", description: "â›°ï¸ é›„å‰å£¯éº—çš„å³½è°·æ™¯è§€ï¼Œä¸–ç•Œç´šçš„è‡ªç„¶å¥‡è§€ã€‚", location: "èŠ±è“®ç§€æ—", category: "è‡ªç„¶", coords: { lat: 24.1822, lng: 121.6111 }, image: null },
            { id: 6, name: "é˜¿é‡Œå±±åœ‹å®¶æ£®æ—éŠæ¨‚å€", description: "ğŸŒ² æ—¥å‡ºã€é›²æµ·ã€æ™šéœã€æ£®æ—åŠé«˜å±±éµè·¯ã€‚", location: "å˜‰ç¾©é˜¿é‡Œå±±", category: "è‡ªç„¶", coords: { lat: 23.5103, lng: 120.8061 }, image: null },
            
            // å¤œå¸‚ç¾é£Ÿ (ç¾é£Ÿ)
            { id: 7, name: "å£«æ—å¤œå¸‚", description: "ğŸœ å°åŒ—æœ€å¤§ã€æœ€çŸ¥åçš„è§€å…‰å¤œå¸‚ï¼Œç¾é£Ÿé›²é›†ã€‚", location: "å°åŒ—å£«æ—", category: "ç¾é£Ÿ", coords: { lat: 25.0886, lng: 121.5244 }, image: null },
            { id: 8, name: "å…­åˆå¤œå¸‚", description: "ğŸ¦ é«˜é›„å¸‚æœ€å…·ä»£è¡¨æ€§çš„å¤œå¸‚ï¼Œä»¥æµ·é®®èåã€‚", location: "é«˜é›„æ–°èˆˆ", category: "ç¾é£Ÿ", coords: { lat: 22.6330, lng: 120.3022 }, image: null },
            { id: 9, name: "æ–‡åŒ–è·¯å¤œå¸‚", description: "ğŸ² å˜‰ç¾©ä»£è¡¨æ€§çš„ç¾é£Ÿè¡—ï¼Œé›è‚‰é£¯ç™¼æºåœ°ã€‚", location: "å˜‰ç¾©è¥¿å€", category: "ç¾é£Ÿ", coords: { lat: 23.4792, lng: 120.4497 }, image: null },
            
            // æ–‡å‰µåœ’å€ (æ–‡å‰µ)
            { id: 10, name: "è¯å±±1914æ–‡å‰µåœ’å€", description: "ğŸ¨ èˆŠé…’å» æ”¹å»ºï¼Œå……æ»¿è—æ–‡æ°£æ¯çš„å±•è¦½ç©ºé–“ã€‚", location: "å°åŒ—ä¸­æ­£", category: "æ–‡å‰µ", coords: { lat: 25.0444, lng: 121.5293 }, image: null },
            { id: 11, name: "æ¾å±±æ–‡å‰µåœ’å€", description: "ğŸ¢ å‰èº«ç‚ºè¸å» ï¼Œç¾åœ¨æ˜¯è¨­è¨ˆå±•è¦½çš„ç†±é–€åœ°é»ã€‚", location: "å°åŒ—ä¿¡ç¾©", category: "æ–‡å‰µ", coords: { lat: 25.0436, lng: 121.5625 }, image: null },
            { id: 12, name: "é§äºŒè—è¡“ç‰¹å€", description: "ğŸ­ æ¸¯å£å€‰åº«æ”¹å»ºçš„è—æ–‡ç‰¹å€ï¼Œå……æ»¿æµ·æ´‹é¢¨æƒ…ã€‚", location: "é«˜é›„é¹½åŸ•", category: "æ–‡å‰µ", coords: { lat: 22.6226, lng: 120.2878 }, image: null },
            
            // å…¶ä»–
            { id: 13, name: "å°åŒ— 101 è§€æ™¯å°", description: "ğŸ™ï¸ å°ç£åœ°æ¨™ï¼Œå¯ä¿¯ç°æ•´å€‹å°åŒ—éƒ½æœƒå€ã€‚", location: "å°åŒ—ä¿¡ç¾©", category: "å…¶ä»–", coords: { lat: 25.0336, lng: 121.5647 }, image: 'https://picsum.photos/400/200?random=13' },
            { id: 14, name: "åœ‹ç«‹æµ·æ´‹ç”Ÿç‰©åšç‰©é¤¨", description: "ğŸ  å°ç£æœ€å¤§æ°´æ—é¤¨ï¼Œå¯å¤œå®¿çš„æµ·æ´‹ä¸–ç•Œã€‚", location: "å±æ±è»ŠåŸ", category: "å…¶ä»–", coords: { lat: 22.0461, lng: 120.6989 }, image: null },
        ];

        let currentTrip = {
            origin: null,
            destination: null
        };
        
        let currentCategory = 'å…¨éƒ¨'; // é è¨­é¡¯ç¤ºå…¨éƒ¨

        // --- 1. æ¨¡æ“¬ API Key é©—è­‰åŠŸèƒ½ ---
        function checkApiKey() {
            const apiKeyInput = document.getElementById('apiKey').value.trim();
            const statusLight = document.getElementById('api-status-light');
            const statusText = document.getElementById('api-status-text');

            if (apiKeyInput.length > 20 && apiKeyInput.startsWith('AIza')) { 
                statusLight.classList.remove('invalid');
                statusLight.classList.add('valid');
                statusText.innerText = 'å·²é€£ç·š (æ¨¡æ“¬)';
                alert('API Key é©—è­‰æˆåŠŸï¼ (æ¨¡æ“¬åŠŸèƒ½)');
            } else {
                statusLight.classList.remove('valid');
                statusLight.classList.add('invalid');
                statusText.innerText = 'ç„¡æ•ˆ Key';
                alert('è«‹è¼¸å…¥æœ‰æ•ˆçš„ Key ä»¥å•Ÿç”¨ AI åŠŸèƒ½ã€‚');
            }
        }
        
        // --- 2. é»é¸æ™¯é»å¡ç‰‡å¾Œé¡¯ç¤ºä»‹ç´¹èˆ‡åœ°åœ–åº§æ¨™ ---
        function showSpotDetails(spotId) {
            const spot = SPOTS_DATA.find(s => s.id === spotId);
            if (!spot) return;

            const infoDisplay = document.getElementById('spot-info-display');
            const mapDisplay = document.getElementById('map-display');
            
            // æ›´æ–°æ™¯é»è³‡è¨Š
            infoDisplay.innerHTML = `
                <h4>âœ¨ ${spot.name} (${spot.category})</h4>
                <p style="font-size:0.95em; color:var(--text-color);">${spot.description}</p>
                <p style="margin: 5px 0;"><strong>ğŸ“ ä½ç½®:</strong> ${spot.location}</p>
                <p style="margin: 5px 0;"><strong>ğŸŒ åº§æ¨™:</strong> Lat: ${spot.coords.lat.toFixed(4)}, Lng: ${spot.coords.lng.toFixed(4)}</p>
            `;

            // æ¨¡æ“¬åœ°åœ–åº§æ¨™é¡¯ç¤º
            mapDisplay.innerHTML = `
                <div style="text-align: center;">
                    <strong>[æ¨¡æ“¬åœ°åœ–]</strong><br>
                    æ™¯é»ï¼š${spot.name}<br>
                    ä¸­å¿ƒé»ï¼š${spot.coords.lat.toFixed(2)}, ${spot.coords.lng.toFixed(2)}
                </div>
            `;
            
            // æ²å‹•åˆ°æ™¯é»è³‡è¨Šå€
            infoDisplay.scrollIntoView({ behavior: 'smooth' });
        }
        
        // --- 3. é»æ“ŠæŒ‰éˆ•ç”Ÿæˆåœ–ç‰‡ (æ¨¡æ“¬) ---
        function simulateImageGeneration(event, spotId) {
            event.stopPropagation();
            const card = document.querySelector(`.spot-card[data-id="${spotId}"]`);
            if (!card) return;

            const imagePlaceholder = card.querySelector('.card-image-placeholder');
            const spot = SPOTS_DATA.find(s => s.id === spotId);

            imagePlaceholder.innerHTML = '<span style="color:white;">AI æ­£åœ¨ç”Ÿæˆåœ–ç‰‡ä¸­...</span>';
            imagePlaceholder.style.backgroundColor = '#a3b1c6';

            setTimeout(() => {
                const randomImage = `https://picsum.photos/400/200?random=${spotId + Math.random()}`; // ä½¿ç”¨ç¯„ä¾‹åœ–ç‰‡
                imagePlaceholder.style.backgroundImage = `url('${randomImage}')`;
                imagePlaceholder.style.color = 'transparent';
                imagePlaceholder.innerHTML = '';
                
                // å°‡åœ–ç‰‡ç¶²å€å­˜å…¥è³‡æ–™ä¸­ï¼Œå¦‚æœéœ€è¦çš„è©±
                spot.image = randomImage; 
                
                // ç”ŸæˆæˆåŠŸå¾Œï¼Œè®“åœ–ç‰‡å¯ä»¥é»æ“Šé¡¯ç¤ºè©³æƒ…
                const newButton = document.createElement('button');
                newButton.className = 'action-btn';
                newButton.style.marginTop = '5px';
                newButton.style.backgroundColor = 'rgba(0,0,0,0.5)';
                newButton.style.color = 'white';
                newButton.innerText = 'åœ–ç‰‡ç”Ÿæˆå®Œæˆ!';
                
                imagePlaceholder.appendChild(newButton);
            }, 1500); 
        }

        // --- 4. é»æ“Šæ™¯é»å¡ç‰‡å¾Œï¼Œè¨­å®šå•Ÿç¨‹åœ°æˆ–ç›®çš„åœ° ---
        function setWaypoint(event, spotId, type) {
            event.stopPropagation();
            const spot = SPOTS_DATA.find(s => s.id === spotId);
            if (!spot) return;
            
            const displayId = type === 'origin' ? 'origin-display' : 'destination-display';
            
            // æ¸…é™¤æ‰€æœ‰å¡ç‰‡ä¸Šçš„æ¨™è¨˜
            document.querySelectorAll(`.action-btn.${type}`).forEach(btn => {
                btn.classList.remove(type);
            });
            
            // æ›´æ–°ç•¶å‰è¡Œç¨‹ç‹€æ…‹
            currentTrip[type] = spot;
            document.getElementById(displayId).innerHTML = `<strong>${spot.name}</strong>`;
            
            // åœ¨å¡ç‰‡æŒ‰éˆ•ä¸Šæ¨™è¨˜å·²é¸å–çš„ç‹€æ…‹
            const card = document.querySelector(`.spot-card[data-id="${spotId}"]`);
            if(card) {
                const targetBtn = card.querySelector(`.action-btn:nth-child(${type === 'origin' ? 1 : 2})`);
                targetBtn.classList.add(type);
            }

            alert(`å·²å°‡ã€Œ${spot.name}ã€è¨­ç‚ºæ‚¨çš„${type === 'origin' ? 'å•Ÿç¨‹åœ°' : 'ç›®çš„åœ°'}ã€‚`);
        }
        
        // --- 5. æ™¯é»åˆ†é¡ç¯©é¸åŠŸèƒ½ ---
        function filterSpots(category) {
            currentCategory = category;
            
            // è™•ç†åˆ†é¡æŒ‰éˆ•çš„ Active ç‹€æ…‹
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.category === category) {
                    btn.classList.add('active');
                }
            });
            
            renderSpotCards(); // é‡æ–°æ¸²æŸ“å¡ç‰‡
        }


        // --- æ™¯é»å¡ç‰‡å‹•æ…‹ç”Ÿæˆèˆ‡æ¸²æŸ“ ---
        function renderSpotCards() {
            const container = document.getElementById('spot-cards-container');
            container.innerHTML = ''; 

            // æ ¹æ“š currentCategory ç¯©é¸æ™¯é»
            const filteredSpots = currentCategory === 'å…¨éƒ¨'
                ? SPOTS_DATA
                : SPOTS_DATA.filter(spot => spot.category === currentCategory);

            if (filteredSpots.length === 0) {
                container.innerHTML = `<p style="text-align:center; padding: 50px;" class="neumorphic-inset">æ­¤é¡åˆ¥æš«ç„¡æ™¯é»è³‡æ–™ã€‚</p>`;
                return;
            }

            filteredSpots.forEach(spot => {
                const card = document.createElement('div');
                card.className = 'spot-card';
                card.dataset.id = spot.id;
                card.onclick = () => showSpotDetails(spot.id);

                // åœ–ç‰‡ä½”ä½ç¬¦é‚è¼¯
                const imageStyle = spot.image ? `background-image: url('${spot.image}'); color: transparent;` : '';
                const imageContent = spot.image ? '' : `
                    AI ç”Ÿæˆæ™¯é»åœ–ç‰‡
                    <button class="action-btn nav-button" style="background-color: var(--info-color); color: white;" onclick="simulateImageGeneration(event, ${spot.id})">ç”Ÿæˆåœ–ç‰‡</button>
                `;

                // æª¢æŸ¥æ˜¯å¦å·²è¨­å®šç‚ºèµ·é»æˆ–çµ‚é»ï¼Œè¨­å®šæŒ‰éˆ•æ¨£å¼
                const isOrigin = currentTrip.origin && currentTrip.origin.id === spot.id ? 'origin' : '';
                const isDestination = currentTrip.destination && currentTrip.destination.id === spot.id ? 'destination' : '';

                card.innerHTML = `
                    <div class="card-image-placeholder" style="${imageStyle}">
                        ${imageContent}
                    </div>
                    <div class="card-content">
                        <h3>${spot.name}</h3>
                        <p style="font-size: 0.9em; margin-bottom: 5px;">${spot.description}</p>
                        <p style="font-size: 0.8em; color: #666;">åœ°é»: ${spot.location}</p>
                        <div class="card-actions">
                            <button class="action-btn ${isOrigin}" onclick="setWaypoint(event, ${spot.id}, 'origin')">è¨­ç‚ºå•Ÿç¨‹åœ°</button>
                            <button class="action-btn ${isDestination}" onclick="setWaypoint(event, ${spot.id}, 'destination')">è¨­ç‚ºç›®çš„åœ°</button>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }
        
        // é é¢è¼‰å…¥å®Œæˆå¾ŒåŸ·è¡Œ
        document.addEventListener('DOMContentLoaded', () => {
            renderSpotCards();
            
            // ç‚ºåˆ†é¡æŒ‰éˆ•æ·»åŠ äº‹ä»¶ç›£è½å™¨
            document.querySelectorAll('.category-btn').forEach(button => {
                button.addEventListener('click', function() {
                    filterSpots(this.dataset.category);
                });
            });

            // ç‚ºè·¯ç·šè¦åŠƒæŒ‰éˆ•æ·»åŠ äº‹ä»¶ (æ¨¡æ“¬)
            document.getElementById('start-planning-btn').addEventListener('click', () => {
                if (!currentTrip.origin || !currentTrip.destination) {
                    alert('è«‹å…ˆè¨­å®šå•Ÿç¨‹åœ°èˆ‡ç›®çš„åœ°æ‰èƒ½è¦åŠƒè·¯ç·šï¼');
                    return;
                }
                
                alert(`AI è¦åŠƒè«‹æ±‚ç™¼é€ä¸­...\nå¾ ${currentTrip.origin.name} åˆ° ${currentTrip.destination.name} çš„æœ€ä½³è·¯ç·šå°‡ç”± AI æ¼”ç®—æ³•ç”Ÿæˆã€‚`);
                // é€™è£¡å°‡æ˜¯å‘¼å« AI è¦åŠƒ API çš„å¯¦éš›é‚è¼¯
            });
        });

    </script>
</body>
</html>
