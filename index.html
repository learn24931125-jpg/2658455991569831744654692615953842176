<H1>æ™ºæ…§æ—…éŠå°è¦½</H1>
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI æ™ºæ…§æ—…éŠå°è¦½ç³»çµ± - å°ç£</title>
    <style>
        /* Neumorphism æŸ”å’Œäºå…‹åŠ›é¢¨æ ¼è®Šæ•¸ */
        :root {
            --main-bg-color: #e0e5ec; /* ä¸»èƒŒæ™¯è‰² */
            --light-shadow: #ffffff;  /* äº®éƒ¨é™°å½± */
            --dark-shadow: #a3b1c6;   /* æš—éƒ¨é™°å½± */
            --text-color: #333;       /* æ–‡å­—é¡è‰² */
            --accent-color: #4CAF50;  /* å¼·èª¿è‰²ï¼ˆç¶ è‰²ï¼‰ */
            --warning-color: #f44336; /* è­¦ç¤ºè‰²ï¼ˆç´…ï¼‰ */
            --info-color: #2196F3;    /* è³‡è¨Šè‰²ï¼ˆè—ï¼‰ */
            --border-radius: 12px;
            --padding-size: 20px;
        }

        /* é‡ç½®èˆ‡é€šç”¨æ¨£å¼ */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--main-bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--padding-size);
            width: 100%;
        }

        /* Neumorphism åŸºç¤æ¨£å¼ (å…§å‡¹) */
        .neumorphic-inset {
            border-radius: var(--border-radius);
            background: var(--main-bg-color);
            box-shadow: inset 6px 6px 12px var(--dark-shadow),
                        inset -6px -6px 12px var(--light-shadow);
            padding: var(--padding-size);
            margin-bottom: var(--padding-size);
        }

        /* Neumorphism åŸºç¤æ¨£å¼ (å¤–å‡¸) */
        .neumorphic-outset {
            border-radius: var(--border-radius);
            background: var(--main-bg-color);
            box-shadow: 6px 6px 12px var(--dark-shadow),
                        -6px -6px 12px var(--light-shadow);
            padding: var(--padding-size);
            margin-bottom: var(--padding-size);
        }

        /* --- 1. æ¨™é¡Œå€ --- */
        header {
            text-align: center;
            padding: 40px 0;
            background: var(--main-bg-color);
            box-shadow: 0 4px 8px var(--dark-shadow),
                        0 -4px 8px var(--light-shadow);
            margin-bottom: var(--padding-size);
        }

        header h1 {
            font-size: 2.5em;
            color: var(--text-color);
            text-shadow: 1px 1px 2px var(--light-shadow);
            margin: 0;
        }

        /* --- 2. API è¨­å®šå€ --- */
        .api-settings {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .api-settings input[type="text"] {
            flex-grow: 1;
            padding: 10px 15px;
            border: none;
            border-radius: 8px;
            background: var(--main-bg-color);
            box-shadow: inset 2px 2px 5px var(--dark-shadow),
                        inset -2px -2px 5px var(--light-shadow);
        }
        
        /* ç‹€æ…‹æŒ‡ç¤ºç‡ˆ */
        .status-light {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
            box-shadow: 1px 1px 2px var(--dark-shadow), -1px -1px 2px var(--light-shadow);
        }
        .status-light.valid { background-color: var(--accent-color); }
        .status-light.invalid { background-color: var(--warning-color); }

        /* --- ä¸»å…§å®¹å€ä½ˆå±€ --- */
        .main-content {
            display: flex;
            gap: var(--padding-size);
        }

        .sidebar {
            width: 30%;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            gap: var(--padding-size);
        }

        .main-panel {
            width: 70%;
            display: flex;
            flex-direction: column;
            gap: var(--padding-size);
        }

        /* --- 3. æ™¯é»é¸å–® & æŒ‰éˆ• --- */
        .nav-button {
            border: none;
            padding: 10px 15px;
            border-radius: var(--border-radius);
            background: var(--main-bg-color);
            cursor: pointer;
            font-weight: bold;
            color: var(--text-color);
            box-shadow: 3px 3px 6px var(--dark-shadow),
                        -3px -3px 6px var(--light-shadow);
            transition: all 0.2s ease;
        }

        .nav-button:hover {
            transform: scale(1.02);
        }

        .nav-button:active, .nav-button.active {
            box-shadow: inset 3px 3px 6px var(--dark-shadow),
                        inset -3px -3px 6px var(--light-shadow);
            color: var(--accent-color);
        }
        
        .trip-status p { margin: 5px 0; }
        .trip-status strong { color: var(--info-color); }

        /* --- 4. æ™¯é»å¡ç‰‡å€ --- */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--padding-size);
        }

        .spot-card {
            border-radius: var(--border-radius);
            background: var(--main-bg-color);
            box-shadow: 6px 6px 12px var(--dark-shadow),
                        -6px -6px 12px var(--light-shadow);
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden;
            position: relative;
        }

        .spot-card:hover {
            transform: translateY(-3px);
            box-shadow: 8px 8px 16px var(--dark-shadow),
                        -8px -8px 16px var(--light-shadow);
        }

        .card-image-placeholder {
            width: 100%;
            height: 180px;
            background-color: #d1d9e6;
            box-shadow: inset 1px 1px 3px var(--dark-shadow),
                        inset -1px -1px 3px var(--light-shadow);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 0.9em;
            color: #666;
            padding: 10px;
            box-sizing: border-box;
            background-size: cover;
            background-position: center;
            text-shadow: 1px 1px 2px white;
        }
        
        .card-image-placeholder > button {
            margin-top: 5px;
            background-color: var(--info-color);
            color: white;
        }

        .card-content {
            padding: 15px;
        }

        .card-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }

        .action-btn {
            padding: 8px 12px;
            font-size: 0.9em;
            border: none;
            border-radius: 8px;
            background: var(--main-bg-color);
            box-shadow: 2px 2px 4px var(--dark-shadow),
                        -2px -2px 4px var(--light-shadow);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .action-btn.origin { color: white; background-color: var(--accent-color); }
        .action-btn.destination { color: white; background-color: var(--warning-color); }
        
        .action-btn:active {
            box-shadow: inset 2px 2px 4px var(--dark-shadow),
                        inset -2px -2px 4px var(--light-shadow);
        }

        /* --- 5. åœ°åœ–å±•ç¤ºå€ & æ™¯é»è³‡è¨Š --- */
        #map-display {
            width: 100%;
            height: 400px;
            background-color: #a3b1c6;
            box-shadow: inset 8px 8px 16px var(--dark-shadow),
                        inset -8px -8px 16px var(--light-shadow);
            border-radius: var(--border-radius);
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--light-shadow);
            font-size: 1.2em;
            margin-top: 20px;
        }
        
        #spot-info-display {
            border-top: 1px solid var(--dark-shadow);
            padding-top: 15px;
        }
    </style>
</head>
<body>

    <header>
        <h1>ğŸ‡¹ğŸ‡¼ AI æ™ºæ…§æ—…éŠå°è¦½ç³»çµ±</h1>
        <p>è¦åŠƒå°ç£æœ€ä½³è·¯ç·šï¼Œç”Ÿæˆæ™¯é»ä»‹ç´¹èˆ‡åœ–ç‰‡</p>
    </header>

    <div class="container">
        <div class="api-settings neumorphic-inset">
            <label>API ç‹€æ…‹: <span id="api-status-text">æœªé©—è­‰</span> <span id="api-status-light" class="status-light invalid"></span></label>
            <label for="apiKey">Gemini API Key:</label>
            <input type="text" id="apiKey" placeholder="è¼¸å…¥æ‚¨çš„ Gemini API Key" />
            <select id="modelSelect" class="nav-button">
                <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
                <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
                <option value="openai-gpt-4o">GPT-4o</option>
            </select>
            <button class="nav-button" onclick="checkApiKey()">é©—è­‰ Key</button>
        </div>

        <div class="main-content">
            <div class="sidebar">
                <div class="trip-status neumorphic-outset">
                    <h3>ğŸ“ æ‚¨çš„æ—…ç¨‹ç‹€æ…‹</h3>
                    <p>å•Ÿç¨‹åœ°: <span id="origin-display"><strong>æœªè¨­å®š</strong></span></p>
                    <p>ç›®çš„åœ°: <span id="destination-display"><strong>æœªè¨­å®š</strong></span></p>
                    <button class="nav-button" id="start-planning-btn" style="width: 100%; background-color: var(--warning-color); color: white; margin-top: 15px;">AI è‡ªå‹•è¦åŠƒè·¯ç·š</button>
                </div>
                
                <div class="spot-menu neumorphic-outset">
                    <h3>ğŸ—ºï¸ æ™¯é»è³‡è¨Šèˆ‡åœ°åœ–</h3>
                    
                    <div id="spot-info-display">
                        è«‹é»æ“Šæ™¯é»å¡ç‰‡æŸ¥çœ‹è©³ç´°è³‡è¨Šã€‚
                    </div>

                    <div id="map-display">
                        åœ°åœ–å±•ç¤ºå€ï¼ˆå°‡æ¨¡æ“¬åº§æ¨™é¡¯ç¤ºï¼‰
                    </div>
                </div>
            </div>

            <div class="main-panel">
                <h2>ç²¾é¸å°ç£æ™¯é»</h2>
                
                <div class="neumorphic-inset" style="padding: 10px;">
                    <ul style="list-style: none; padding: 0; display: flex; gap: 10px;">
                        <li><button class="nav-button active" style="padding: 5px 10px;">å…¨éƒ¨</button></li>
                        <li><button class="nav-button" style="padding: 5px 10px;">å¤è¹Ÿ</button></li>
                        <li><button class="nav-button" style="padding: 5px 10px;">è‡ªç„¶</button></li>
                        <li><button class="nav-button" style="padding: 5px 10px;">ç¾é£Ÿ</button></li>
                    </ul>
                </div>
                
                <div class="card-grid" id="spot-cards-container">
                    </div>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ“¬æ™¯é»è³‡æ–™ (åŒ…å« IDã€åç¨±ã€æè¿°å’Œåœ°åœ–åº§æ¨™)
        const SPOTS_DATA = [
            { id: 1, name: "æ•…å®®åšç‰©é™¢", description: "ğŸ›ï¸ å…¨çƒä¸­è¯æ–‡åŒ–è—è¡“å¯¶è—ã€‚", location: "å°åŒ—å£«æ—", category: "å¤è¹Ÿ", coords: { lat: 25.1018, lng: 121.5489 }, image: null },
            { id: 2, name: "å°åŒ— 101", description: "ğŸ™ï¸ å°ç£åœ°æ¨™ï¼Œè·¨å¹´ç…™ç«çš„ç†±é–€æ™¯é»ã€‚", location: "å°åŒ—ä¿¡ç¾©", category: "éƒ½æœƒ", coords: { lat: 25.0339, lng: 121.5654 }, image: null },
            { id: 3, name: "æ—¥æœˆæ½­", description: "ğŸï¸ å°ç£ä¸­éƒ¨æœ€ç¾çš„é«˜å±±æ¹–æ³Šã€‚", location: "å—æŠ•é­šæ± ", category: "è‡ªç„¶", coords: { lat: 23.8967, lng: 120.9167 }, image: 'https://cdn.example.com/sunmoonlake.jpg' },
            { id: 4, name: "å®‰å¹³å¤å ¡", description: "ğŸ° å°ç£æ­·å²æœ€æ‚ ä¹…çš„åŸå ¡ä¹‹ä¸€ã€‚", location: "å°å—å®‰å¹³", category: "å¤è¹Ÿ", coords: { lat: 22.9972, lng: 120.1650 }, image: null },
            { id: 5, name: "å£«æ—å¤œå¸‚", description: "ğŸœ å°åŒ—æœ€å¤§ã€æœ€çŸ¥åçš„è§€å…‰å¤œå¸‚ã€‚", location: "å°åŒ—å£«æ—", category: "ç¾é£Ÿ", coords: { lat: 25.0886, lng: 121.5245 }, image: null },
        ];

        let currentTrip = {
            origin: null,
            destination: null
        };
        
        // --- 1. æ¨¡æ“¬ API Key é©—è­‰åŠŸèƒ½ ---
        function checkApiKey() {
            const apiKeyInput = document.getElementById('apiKey').value.trim();
            const statusLight = document.getElementById('api-status-light');
            const statusText = document.getElementById('api-status-text');

            if (apiKeyInput.length > 20 && apiKeyInput.startsWith('AIza')) { // ç°¡å–®çš„æ¨¡æ“¬æª¢æŸ¥
                statusLight.classList.remove('invalid');
                statusLight.classList.add('valid');
                statusText.innerText = 'å·²é€£ç·š (æ¨¡æ“¬)';
                alert('API Key é©—è­‰æˆåŠŸï¼ (æ¨¡æ“¬åŠŸèƒ½)');
            } else {
                statusLight.classList.remove('valid');
                statusLight.classList.add('invalid');
                statusText.innerText = 'ç„¡æ•ˆ Key';
                alert('è«‹è¼¸å…¥æœ‰æ•ˆçš„ Key ä»¥å•Ÿç”¨ AI åŠŸèƒ½ã€‚');
            }
        }
        
        // --- 2. é»é¸æ™¯é»å¡ç‰‡å¾Œé¡¯ç¤ºä»‹ç´¹èˆ‡åœ°åœ–åº§æ¨™ ---
        function showSpotDetails(spotId) {
            const spot = SPOTS_DATA.find(s => s.id === spotId);
            if (!spot) return;

            const infoDisplay = document.getElementById('spot-info-display');
            const mapDisplay = document.getElementById('map-display');
            
            // æ›´æ–°æ™¯é»è³‡è¨Š
            infoDisplay.innerHTML = `
                <h4>${spot.name} (${spot.category})</h4>
                <p>${spot.description}</p>
                <p><strong>åœ°é»:</strong> ${spot.location}</p>
                <p><strong>åº§æ¨™:</strong> Lat: ${spot.coords.lat.toFixed(4)}, Lng: ${spot.coords.lng.toFixed(4)}</p>
                <p style="color: var(--warning-color); font-size: 0.9em;">
                    ğŸ‘† æç¤ºï¼šé»æ“Šå¡ç‰‡å‹•ä½œæŒ‰éˆ•å¯è¨­å®šè·¯ç·šï¼
                </p>
            `;

            // æ¨¡æ“¬åœ°åœ–åº§æ¨™é¡¯ç¤º
            mapDisplay.innerHTML = `
                <div style="text-align: center;">
                    <strong>[æ¨¡æ“¬åœ°åœ–]</strong><br>
                    æ™¯é»ï¼š${spot.name}<br>
                    ä¸­å¿ƒé»ï¼š${spot.coords.lat.toFixed(2)}, ${spot.coords.lng.toFixed(2)}
                </div>
            `;
            
            // æ²å‹•åˆ°æ™¯é»è³‡è¨Šå€
            infoDisplay.scrollIntoView({ behavior: 'smooth' });
        }
        
        // --- 3. é»æ“ŠæŒ‰éˆ•ç”Ÿæˆåœ–ç‰‡ (æ¨¡æ“¬) ---
        function simulateImageGeneration(event, spotId) {
            event.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡åˆ°å¡ç‰‡é»æ“Šäº‹ä»¶
            const card = document.querySelector(`.spot-card[data-id="${spotId}"]`);
            if (!card) return;

            const imagePlaceholder = card.querySelector('.card-image-placeholder');
            const spot = SPOTS_DATA.find(s => s.id === spotId);

            imagePlaceholder.innerHTML = 'AI æ­£åœ¨ç”Ÿæˆåœ–ç‰‡ä¸­...';
            imagePlaceholder.style.backgroundColor = '#a3b1c6';

            setTimeout(() => {
                const randomImage = `https://picsum.photos/400/200?random=${spotId}`; // ä½¿ç”¨ç¯„ä¾‹åœ–ç‰‡
                imagePlaceholder.style.backgroundImage = `url('${randomImage}')`;
                imagePlaceholder.style.color = 'transparent';
                imagePlaceholder.innerHTML = '';
                
                alert(`AI ç‚ºæ™¯é»ã€Œ${spot.name}ã€ç”Ÿæˆäº†æ–°çš„åœ–ç‰‡ï¼(æ¨¡æ“¬)`);
            }, 1500); // æ¨¡æ“¬ç”Ÿæˆå»¶é²
        }

        // --- 4. é»æ“Šæ™¯é»å¡ç‰‡å¾Œï¼Œè¨­å®šå•Ÿç¨‹åœ°æˆ–ç›®çš„åœ° ---
        function setWaypoint(event, spotId, type) {
            event.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡åˆ°å¡ç‰‡é»æ“Šäº‹ä»¶
            const spot = SPOTS_DATA.find(s => s.id === spotId);
            if (!spot) return;
            
            const displayId = type === 'origin' ? 'origin-display' : 'destination-display';
            
            // æ¸…é™¤æ‰€æœ‰å¡ç‰‡ä¸Šçš„æ¨™è¨˜
            document.querySelectorAll('.action-btn').forEach(btn => {
                btn.classList.remove('origin', 'destination');
            });
            
            // æ›´æ–°ç•¶å‰è¡Œç¨‹ç‹€æ…‹
            currentTrip[type] = spot;
            document.getElementById(displayId).innerHTML = `<strong>${spot.name}</strong>`;
            
            // åœ¨å¡ç‰‡æŒ‰éˆ•ä¸Šæ¨™è¨˜å·²é¸å–çš„ç‹€æ…‹
            const card = document.querySelector(`.spot-card[data-id="${spotId}"]`);
            if(card) {
                const targetBtn = card.querySelector(`.action-btn:nth-child(${type === 'origin' ? 1 : 2})`);
                targetBtn.classList.add(type);
            }

            alert(`å·²å°‡ã€Œ${spot.name}ã€è¨­ç‚ºæ‚¨çš„${type === 'origin' ? 'å•Ÿç¨‹åœ°' : 'ç›®çš„åœ°'}ã€‚`);
        }

        // --- æ™¯é»å¡ç‰‡å‹•æ…‹ç”Ÿæˆèˆ‡åˆå§‹åŒ– ---
        function renderSpotCards() {
            const container = document.getElementById('spot-cards-container');
            container.innerHTML = ''; // æ¸…ç©ºç¾æœ‰å¡ç‰‡

            SPOTS_DATA.forEach(spot => {
                const card = document.createElement('div');
                card.className = 'spot-card';
                card.dataset.id = spot.id;
                card.onclick = () => showSpotDetails(spot.id);

                // åˆ¤æ–·æ˜¯å¦ç‚ºé è¨­åœ–ç‰‡
                const imageStyle = spot.image ? `background-image: url('${spot.image}'); color: transparent;` : '';
                const imageContent = spot.image ? '' : `
                    AI ç”Ÿæˆæ™¯é»åœ–ç‰‡
                    <button class="action-btn" onclick="simulateImageGeneration(event, ${spot.id})">ç”Ÿæˆåœ–ç‰‡</button>
                `;

                card.innerHTML = `
                    <div class="card-image-placeholder" style="${imageStyle}">
                        ${imageContent}
                    </div>
                    <div class="card-content">
                        <h3>${spot.name} <span style="font-size:0.6em; color:var(--text-color); margin-left:5px;">${spot.category}</span></h3>
                        <p style="font-size: 0.9em;">${spot.description}</p>
                        <div class="card-actions">
                            <button class="action-btn" onclick="setWaypoint(event, ${spot.id}, 'origin')">è¨­ç‚ºå•Ÿç¨‹åœ°</button>
                            <button class="action-btn" onclick="setWaypoint(event, ${spot.id}, 'destination')">è¨­ç‚ºç›®çš„åœ°</button>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }
        
        // é é¢è¼‰å…¥å®Œæˆå¾ŒåŸ·è¡Œ
        document.addEventListener('DOMContentLoaded', () => {
            renderSpotCards();
            
            // ç‚ºè·¯ç·šè¦åŠƒæŒ‰éˆ•æ·»åŠ äº‹ä»¶ (æ¨¡æ“¬)
            document.getElementById('start-planning-btn').addEventListener('click', () => {
                if (!currentTrip.origin || !currentTrip.destination) {
                    alert('è«‹å…ˆè¨­å®šå•Ÿç¨‹åœ°èˆ‡ç›®çš„åœ°ï¼');
                    return;
                }
                
                alert(`AI æ­£åœ¨è¦åŠƒå¾ ${currentTrip.origin.name} åˆ° ${currentTrip.destination.name} çš„æœ€ä½³è·¯ç·š...`);
                // é€™è£¡å°‡æœƒæ˜¯å‘¼å« AI è¦åŠƒ API çš„å¯¦éš›é‚è¼¯
            });
        });

    </script>
</body>
</html>
